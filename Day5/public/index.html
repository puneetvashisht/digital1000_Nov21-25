<html>
<head>
	<title>MEAN App</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
	<style>
		body{
			margin: 0 50px;
		}
	</style>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.8/angular.min.js"></script>
	
	<script>
		var app = angular.module('myApp', [])
		app.controller('ctrl',function($scope, $http){
			$scope.isValid = false;
			$scope.getLogin = function(){
				console.log("send req");
				$http({
					method: 'post',
					url: '/login',
					data: $scope.user
				})
				.success(function(data){
					console.log(data);
					if(data.success){
						$scope.isValid = true;
					}
				})
				.error(function(xhr, status, error){
					console.log(xhr)
					console.log(status)
					console.log(error())
				})
			}
		});
	</script>
	
</head>
<body ng-app="myApp">
	<div ng-controller="ctrl">
		<div ng-hide="isValid">
					<form name="loginForm" class="form-horizontal" ng-submit="getLogin()">
  <div class="form-group">
    <label for="inputEmail3" class="col-sm-2 control-label">Username (Min5-Max10)</label>
    <div class="col-sm-10">
      <input type="text" ng-model="user.name" name="username" ng-minlength="5" ng-maxlength="10" class="form-control" id="inputEmail3" placeholder="Username" required>
      <p ng-show="loginForm.username.$error.minlength" class="text-danger">Number of characters are less than 5</p>
      <p ng-show="loginForm.username.$error.maxlength" class="text-danger">Greater than 10</p>
    </div>
  </div>
  <div class="form-group">
    <label for="inputPassword3" class="col-sm-2 control-label">Password</label>
    <div class="col-sm-10">
      <input type="text" ng-model="user.password" name="password" ng-pattern="/^[a-z]/" class="form-control" id="inputPassword3" placeholder="Password" required>
      <p ng-show="loginForm.password.$invalid && !loginForm.password.$pristine" class="text-danger">Enter a valid password</p>
    </div>
  </div>
  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-10">
      <button ng-disabled="loginForm.$invalid" type="submit" class="btn btn-default">Sign in</button>
    </div>
  </div>
</form>

		</div>
		<div ng-show="isValid">
			Welcome {{user.name}}
		</div>
	</div>
</body>
</html>